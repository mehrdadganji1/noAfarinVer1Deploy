<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Token</title>
    <style>
        body {
            font-family: Tahoma, Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #3B82F6;
            margin-bottom: 20px;
        }
        .token-box {
            background: #f9fafb;
            border: 2px solid #3B82F6;
            border-radius: 4px;
            padding: 15px;
            word-break: break-all;
            font-family: monospace;
            font-size: 12px;
            margin: 20px 0;
            max-height: 200px;
            overflow-y: auto;
        }
        button {
            background: #3B82F6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
        .success {
            color: #10b981;
            font-weight: bold;
            margin: 10px 0;
        }
        .error {
            color: #ef4444;
            font-weight: bold;
            margin: 10px 0;
        }
        .info {
            background: #dbeafe;
            border: 1px solid #3b82f6;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
        .steps {
            background: #fef3c7;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            border: 1px solid #f59e0b;
        }
        .steps ol {
            margin: 10px 0 0 0;
            padding-right: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”‘ Ø¯Ø±ÛŒØ§ÙØª Token</h1>
        
        <div class="info">
            <strong>â„¹ï¸ ØªÙˆØ¬Ù‡:</strong> Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø§ÛŒØ¯ Ø±ÙˆÛŒ Ù‡Ù…ÙˆÙ† domain Ø¨Ø§Ø² Ø¨Ø´Ù‡ Ú©Ù‡ login Ú©Ø±Ø¯ÛŒ (localhost:5173)
        </div>

        <div class="steps">
            <strong>ğŸ“‹ Ù…Ø±Ø§Ø­Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡:</strong>
            <ol>
                <li>Login Ú©Ù† Ø¨Ù‡: <code>http://localhost:5173/login</code></li>
                <li>Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø±Ùˆ Ø¨Ø§Ø² Ú©Ù†</li>
                <li>Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ "Ù†Ù…Ø§ÛŒØ´ Token"</li>
                <li>Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ "Copy Token"</li>
            </ol>
        </div>

        <button onclick="showToken()">ğŸ” Ù†Ù…Ø§ÛŒØ´ Token</button>
        <button onclick="copyToken()">ğŸ“‹ Copy Token</button>
        <button onclick="openLoginPage()">ğŸšª ØµÙØ­Ù‡ Login</button>

        <div id="message"></div>
        <div id="tokenDisplay" class="token-box" style="display:none;"></div>
    </div>

    <script>
        let currentToken = null;

        function showToken() {
            const messageDiv = document.getElementById('message');
            const tokenDisplay = document.getElementById('tokenDisplay');
            
            try {
                const token = localStorage.getItem('token');
                
                if (token) {
                    currentToken = token;
                    messageDiv.innerHTML = '<p class="success">âœ… Token Ù¾ÛŒØ¯Ø§ Ø´Ø¯!</p>';
                    tokenDisplay.style.display = 'block';
                    tokenDisplay.textContent = token;
                } else {
                    messageDiv.innerHTML = '<p class="error">âŒ Token Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯! Ù„Ø·ÙØ§ Ø§Ø¨ØªØ¯Ø§ login Ú©Ù†ÛŒØ¯.</p>';
                    tokenDisplay.style.display = 'none';
                    currentToken = null;
                }
            } catch (error) {
                messageDiv.innerHTML = '<p class="error">âŒ Ø®Ø·Ø§: ' + error.message + '</p>';
                tokenDisplay.style.display = 'none';
            }
        }

        function copyToken() {
            const messageDiv = document.getElementById('message');
            
            if (!currentToken) {
                // Try to get token first
                currentToken = localStorage.getItem('token');
            }
            
            if (currentToken) {
                navigator.clipboard.writeText(currentToken).then(() => {
                    messageDiv.innerHTML = '<p class="success">âœ… Token Ú©Ù¾ÛŒ Ø´Ø¯! Ù…ÛŒØªÙˆÙ†ÛŒ Paste Ú©Ù†ÛŒ (Ctrl+V)</p>';
                    console.log('Token copied:', currentToken.substring(0, 50) + '...');
                }).catch(err => {
                    messageDiv.innerHTML = '<p class="error">âŒ Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ: ' + err.message + '</p>';
                });
            } else {
                messageDiv.innerHTML = '<p class="error">âŒ Ø§Ø¨ØªØ¯Ø§ Ø±ÙˆÛŒ "Ù†Ù…Ø§ÛŒØ´ Token" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯!</p>';
            }
        }

        function openLoginPage() {
            window.open('http://localhost:5173/login', '_blank');
        }

        // Auto-show token on load if available
        window.addEventListener('load', () => {
            const token = localStorage.getItem('token');
            if (token) {
                showToken();
            }
        });
    </script>
</body>
</html>

openapi: 3.0.0
info:
  title: Noafarin Platform API
  description: API documentation for Noafarin platform
  version: 1.0.0
  contact:
    name: Noafarin Team
    email: support@noafarin.ir

servers:
  - url: http://localhost:3000/api
    description: Development server
  - url: https://api.noafarin.ir/api
    description: Production server

tags:
  - name: Authentication
    description: User authentication endpoints
  - name: Users
    description: User management endpoints
  - name: Teams
    description: Team management endpoints
  - name: Events
    description: Event management endpoints
  - name: Evaluations
    description: Evaluation and judging endpoints
  - name: Trainings
    description: Training program endpoints
  - name: Fundings
    description: Funding and grants endpoints

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: Error message

    User:
      type: object
      properties:
        _id:
          type: string
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        role:
          type: array
          items:
            type: string
            enum: [admin, student, mentor, judge, industry_expert, faculty]

    Team:
      type: object
      properties:
        _id:
          type: string
        name:
          type: string
        description:
          type: string
        ideaTitle:
          type: string
        status:
          type: string
          enum: [draft, active, in_evaluation, selected, rejected, graduated]

    Event:
      type: object
      properties:
        _id:
          type: string
        title:
          type: string
        description:
          type: string
        type:
          type: string
          enum: [aaco, workshop, industrial_visit, training, pitch_session, closing_ceremony]
        startDate:
          type: string
          format: date-time
        endDate:
          type: string
          format: date-time

paths:
  /auth/register:
    post:
      tags:
        - Authentication
      summary: Register a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
                firstName:
                  type: string
                lastName:
                  type: string
                role:
                  type: string
      responses:
        '201':
          description: User registered successfully
        '400':
          description: Invalid input

  /auth/login:
    post:
      tags:
        - Authentication
      summary: Login user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Login successful
        '401':
          description: Invalid credentials

  /users/me:
    get:
      tags:
        - Users
      summary: Get current user profile
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User profile
        '401':
          description: Unauthorized

  /teams:
    get:
      tags:
        - Teams
      summary: Get all teams
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of teams
    post:
      tags:
        - Teams
      summary: Create a new team
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                ideaTitle:
                  type: string
      responses:
        '201':
          description: Team created successfully

  /events:
    get:
      tags:
        - Events
      summary: Get all events
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of events
    post:
      tags:
        - Events
      summary: Create a new event
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                type:
                  type: string
                startDate:
                  type: string
                  format: date-time
      responses:
        '201':
          description: Event created successfully

  /evaluations:
    get:
      tags:
        - Evaluations
      summary: Get all evaluations
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of evaluations
    post:
      tags:
        - Evaluations
      summary: Submit an evaluation
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                teamId:
                  type: string
                criteria:
                  type: array
                  items:
                    type: object
                feedback:
                  type: string
      responses:
        '201':
          description: Evaluation submitted successfully

  /trainings:
    get:
      tags:
        - Trainings
      summary: Get all training programs
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of training programs

  /fundings:
    get:
      tags:
        - Fundings
      summary: Get all funding applications
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of funding applications
    post:
      tags:
        - Fundings
      summary: Apply for funding
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                teamId:
                  type: string
                type:
                  type: string
                amount:
                  type: number
      responses:
        '201':
          description: Funding application submitted
